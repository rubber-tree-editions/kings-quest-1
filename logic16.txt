#include "vars.txt"

LOGIC__HEADER



if (fROOM_SCRIPT_EXECUTED) {
  load.pic(vROOM_NO);
  draw.pic(vROOM_NO);
  discard.pic(vROOM_NO);
  set.horizon(46);
  if (fGOAT_COMPANION) {
    load.logics(LOGIC_GOAT);
  }
  if (vROOM_YOU_KILLED_THE_GOAT_IN == vROOM_NO) {
    add.to.pic(62, 0, 0, 114, 71, 0, 0);
  }
  if (vPREV_ROOM_NO == 17) {
    if (fEGO_ON_WATER) {
      set.view(oEGO, 0);
      reset(f98);
      vAQUATIC_ACTIVITY = AQUATICACTIVITY_NONE;
    }
  }
  draw(oEGO);
  show.pic();
}
if (said("examine", "garden")
  || said("examine", "ground")
  || said("examine", "plant")
  || said("examine", "bushes")
) {
  print("This is a neat little carrot patch.  The plump carrots  look tempting.");
}
if (said("examine", "fence")) {
  print("It is a relatively low, native stone and masonry fence to the right and rear of a garden.");
}
if (said("climb", "fence")) {
  print("There is no reason to climb the fence.");
}
if (said("jump", "fence")) {
  print("You can go around the fence.");
}
if (posn(oEGO, 0, 57, 97, 78) || posn(oEGO, 0, 79, 117, 102) || posn(oEGO, 0, 103, 140, 152)) {
  set(f20);
}
else {
  reset(f20);
}
if (f20) {
  if (!fCARRYING_CARROT && said("examine", "carrot")) {
    print("There are many large, plump carrots in the garden.");
  }
  if (!fCARRYING_CARROT && said("get", "carrot")) {
    print("You pluck a delicious looking carrot from the fertile soil.");
    set(fCARRYING_CARROT);
    reset(fCARROT_EATEN);
    get("carrot");
    if (!fPOINTS_FOR_CARROT) {
      vSCORE += 2;
      set(fPOINTS_FOR_CARROT);
    }
  }
}
if (!f20) {
  if (!fCARRYING_CARROT && said("examine", "carrot")) {
    print("They are buried in the ground.  You must get closer to see them.");
  }
  if (!fCARRYING_CARROT && said("get", "carrot")) {
    print("You cannot do that from here.");
  }
}
if (!fCARRYING_CARROT) {
  if (said("eat", "carrot")) {
    print("You do not have a carrot to eat.");
  }
}
if (vEGO_EDGE_CODE == EDGE_HORIZON) {
  new.room(17);
}
if (vEGO_EDGE_CODE == EDGE_RIGHT) {
  new.room(9);
}
if (vEGO_EDGE_CODE == EDGE_LEFT) {
  new.room(15);
}
if (vEGO_EDGE_CODE == EDGE_BOTTOM) {
  new.room(1);
}
if (fGOAT_COMPANION) {
  call(LOGIC_GOAT);
}
return;

LOGIC__FOOTER

