#include "vars.txt"

LOGIC__HEADER

#define oCLOVER o1

if (fROOM_SCRIPT_EXECUTED) {
  load.pic(vROOM_NO);
  draw.pic(vROOM_NO);
  discard.pic(vROOM_NO);
  set.horizon(46);
  if (fGOAT_COMPANION) {
    load.logics(LOGIC_GOAT);
  }
  if (vROOM_YOU_KILLED_THE_GOAT_IN == vROOM_NO) {
    add.to.pic(62, 0, 0, 30, 75, 0, 0);
  }
  if (!fCLOVER_TAKEN) {
    load.view(21);
    animate.obj(oCLOVER);
    set.view(oCLOVER, 21);
    position(oCLOVER, 53, 134);
    set(f20);
  }
  if (f20) {
    draw(oCLOVER);
    stop.update(oCLOVER);
  }
  draw(oEGO);
  show.pic();
}
if (!fCARRYING_CLOVER) {
  if (said("examine", "four leaf clover") || said("examine", "ground")) {
    if (posn(oEGO, 0, 77, 118, 167)) {
      print("There is a small patch of clover under the tree.");
    }
    else {
      print("Off in the distance you see a patch of clover.");
    }
  }
}
distance(oEGO, oCLOVER, v62);
if (said("get", "four leaf clover")) {
  if (fCLOVER_TAKEN) {
    if (fCARRYING_CLOVER) {
      print("You already have the only fourleaf clover here.");
    }
    else {
      print("You had, and lost, the only fourleaf clover  around.  You really don't want a threeleaf clover.");
    }
  }
  if (!fCLOVER_TAKEN) {
    if (v62 < 25) {
      print("The clover is soft, yet you sense a strange strength in it.");
      get("fourleaf clover");
      vSCORE += 2;
      set(fCLOVER_TAKEN);
      set(fCARRYING_CLOVER);
      start.update(oCLOVER);
      erase(oCLOVER);
    }
    else {
      print("You really don't want any of the threeleaf clovers.");
    }
  }
}
if (vEGO_EDGE_CODE == EDGE_HORIZON) {
  new.room(25);
}
if (vEGO_EDGE_CODE == EDGE_RIGHT) {
  new.room(23);
}
if (vEGO_EDGE_CODE == EDGE_LEFT) {
  new.room(17);
}
if (vEGO_EDGE_CODE == EDGE_BOTTOM) {
  new.room(9);
}
if (fGOAT_COMPANION) {
  call(LOGIC_GOAT);
}
return;

LOGIC__FOOTER

