#include "vars.txt"

LOGIC__HEADER

vGAME_OVER_MESSAGE_COUNTDOWN--;
if (vGAME_OVER_MESSAGE_COUNTDOWN == 1) {
  vGAME_OVER_MESSAGE_COUNTDOWN = 0;
  sound(SND_GAME_OVER, f148);
  if (vSCORE < 50) {
    print("We, at Sierra, wish to thank you for playing King's Quest. We are very sorry that you did not succeed and hope you will fare better next time. Good luck.");
  }
  else if (vSCORE < 100) {
    print("We, at Sierra, wish to thank you for playing King's Quest. We are pleased to see that you are doing so well and hope that your score will keep improving.");
  }
  else {
    print("We, at Sierra, wish to thank you for playing King's Quest. We are delighted by your score and hope you are enjoying the game.");
  }
}
if (fGOAT_COMPANION) {
  normal.motion(o13);
  stop.motion(o13);
  stop.cycling(o13);
}
if (said("quit") || controller(cQUIT)) {
  stop.sound();
  quit(0);
}
if (said("restore", "game") || controller(cRESTORE)) {
  stop.sound();
  restore.game();
}
if (said("restart", "game") || controller(cRESTART)) {
  stop.sound();
  restart.game();
}
#ifdef RUBBER_TREE
if (said("undo") || controller(cUNDO)) {
  set(fUNDO);
}
#endif
if (controller(cINVENTORY)) {
  stop.sound();
  status();
}
if (controller(cHELP)) {
  call(LOGIC92_HELP);
}
if (controller(cTOGGLESOUND)) {
  toggle(fSOUND_ENABLED);
}
if (controller(cCLEARINPUT)) {
  cancel.line();
}
if (controller(cABOUT)) {
  print("        King's Quest\n             by\n      Roberta Williams\n\n    Original version by\nArthur Abraham, Chuck Tingley\n        Ken McNeill\n\n        Graphics by\n Doug McNeill, Greg Rowland\n\n      This version by\n       Sol Ackerman\n\n(C) 1986 Sierra On-Line, Inc.");
}
if (controller(cPREVINPUT)) {
  echo.line();
}
if (controller(cPAUSE)) {
  pause();
}
if (!fSAID_ACCEPTED_USER_INPUT) {
  if (said("anyword", "anyword") || said("anyword") || said("anyword", "anyword", "anyword")) {
    stop.sound();
    if (vROOM_NO == ROOM65_IN_GINGERBREAD_HOUSE) {
#ifdef RUBBER_TREE
      print("As you will never get out of this cage alive, I can only permit you to: Restore Game, Restart Game, Undo or Take Inventory. Sorry.");
#else
      print("As you will never get out of this cage alive, I can only permit you to: Restore Game, Restart Game or Take Inventory. Sorry.");
#endif
    }
    else {
#ifdef RUBBER_TREE
      print("As you are dead, I can only permit you to: Restore Game,  Restart Game, Undo or Take Inventory. Sorry.");
#else
      print("As you are dead, I can only permit you to: Restore Game,  Restart Game or Take Inventory. Sorry.");
#endif
    }
  }
}
return;

LOGIC__FOOTER
