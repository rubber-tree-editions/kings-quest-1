#include "vars.txt"

LOGIC__HEADER

if (fROOM_SCRIPT_EXECUTED) {
  load.pic(vROOM_NO);
  draw.pic(vROOM_NO);
  discard.pic(vROOM_NO);
  if (vPREV_ROOM_NO == 36) {
    set.view(oEGO, 60);
    position(oEGO, 3, 81);
  }
  if (vPREV_ROOM_NO == 77) {
    position(oEGO, 146, 131);
    move.obj(oEGO, 146, 131, 0, f148);
  }
  draw(oEGO);
  show.pic();
}
if (fEGO_TINY) {
  ignore.blocks(oEGO);
}
else {
  observe.blocks(oEGO);
}
if (v82 == 1 && fEGO_TINY) {
  if (posn(oEGO, 1, 75, 12, 82)) {
    reset(fEGO_TINY);
    print("You feel a stretching sensation... Oh, you're back to your original size.  You can't get out of the small cave!");
    set(fGAME_OVER);
  }
  else {
    set.view(oEGO, 0);
    print("You feel a stretching sensation... Oh, you're back to your original size.");
    reset(fEGO_TINY);
  }
}
if (said("examine", "stairway")) {
  print("The stairs are very steep and narrow.");
}
if (said("examine", "doorway") || said("look inside", "doorway")) {
  print("The small hole leads to the outside world.");
}
if (said("go", "doorway") || said("go", "doorway")) {
  if (fEGO_TINY) {
    print("Go ahead.  Walk right in.");
  }
  else {
    print("You are much too big to fit through that small hole.");
  }
}
if (said("examine", "cave") || said("examine", "room")) {
  print("This is a small cave with stairs on one side and a very small hole on the other side.");
}
if (vEGO_EDGE_CODE == EDGE_RIGHT) {
  new.room(77);
}
if (posn(oEGO, 0, 0, 1, 167)) {
  new.room(36);
}
return;

LOGIC__FOOTER

