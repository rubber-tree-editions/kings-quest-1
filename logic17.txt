#include "vars.txt"

LOGIC__HEADER



if (fROOM_SCRIPT_EXECUTED) {
  load.pic(vROOM_NO);
  draw.pic(vROOM_NO);
  discard.pic(vROOM_NO);
  set.horizon(56);
  load.logics(101);
  call(101);
  if (f75) {
    load.logics(103);
  }
  if (v65 == vROOM_NO) {
    add.to.pic(62, 0, 0, 109, 141, 0, 0);
  }
  LABEL41:
    if (vPREV_ROOM_NO == 18 && fEGO_ON_WATER) {
      get.posn(oEGO, v60, v61);
      if (v61 < 111) {
        position(oEGO, 4, 121);
      }
    }
  LABEL65:
    if (vPREV_ROOM_NO == 32) {
      get.posn(oEGO, v60, v61);
      if (v60 < 50) {
        position(oEGO, 2, 59);
        goto(LABEL94);
      }
      position(oEGO, 109, 66);
    }
  LABEL94:
    if (vPREV_ROOM_NO == 16) {
      if (posn(oEGO, 0, 164, 88, 167)) {
        position(oEGO, 88, 165);
      }
    }
  LABEL115:
    ignore.blocks(oEGO);
    draw(oEGO);
    show.pic();
}
if (!fEGO_ON_WATER) {
  if (posn(oEGO, 32, 103, 102, 123) || posn(oEGO, 0, 96, 58, 108) || posn(oEGO, 34, 87, 68, 97) || posn(oEGO, 13, 88, 37, 97)) {
    set(fEGO_ON_WATER);
    set(f134);
  }
}
LABEL161:
  if (said("examine", "lake")) {
    print("This is a clear mountain lake with some steep cliffs surrounding it.");
  }
LABEL173:
  if (!fBUCKET_FILLED && !fEGO_ON_WATER && !f116) {
    if (said("drink", "water") || said("get", "drink")) {
      if (posn(oEGO, 64, 106, 116, 167)) {
        print("You have to scoop the water with your hands, but you manage to satisfy your thirst.");
      }
      if (posn(oEGO, 0, 0, 115, 105)) {
        print("That's a dangerous proposition from here.");
      }
      LABEL228:
        if (!posn(oEGO, 64, 106, 116, 167) && !posn(oEGO, 0, 0, 115, 105)) {
          print();
        }
    }
  }
LABEL248:
  if (!fBUCKET_FILLED && fCARRYING_BUCKET && !fEGO_ON_WATER && said("get", "water")) {
    if (posn(oEGO, 64, 106, 116, 167)) {
      reset(f116);
      print(null);
      get("water");
      set(fBUCKET_FILLED);
      if (!fFILL_BUCKET_POINTS) {
        vSCORE += 2;
      }
      set(fFILL_BUCKET_POINTS);
    }
    if (posn(oEGO, 0, 0, 115, 105)) {
      print("That's a dangerous proposition from here.");
    }
    LABEL308:
      if (!posn(oEGO, 64, 106, 116, 167) && !posn(oEGO, 0, 0, 115, 105)) {
        print();
      }
  }
LABEL328:
  if (v94 <= 0 && fEGO_TOUCHED_TRIGGER_LINE) {
    set(fEGO_ON_WATER);
    v76 = 255;
    if (posn(oEGO, 93, 78, 112, 108)) {
      v76 = 84;
      v77 = 111;
    }
    if (posn(oEGO, 86, 55, 98, 77)) {
      v76 = 71;
      v77 = 106;
    }
    LABEL375:
      if (posn(oEGO, 0, 40, 25, 70)) {
        v76 = 6;
        v77 = 87;
      }
    LABEL391:
      if (v76 == 255) {
        v76 = 0;
        goto(LABEL416);
      }
    LABEL404:
      get.posn(oEGO, v60, v61);
      v76 -= v60;
      v77 -= v61;
      set(f134);
  }
LABEL416:
  if (v94 <= 0 && fEGO_ON_WATER && !fEGO_TOUCHED_TRIGGER_LINE) {
    v76 = 255;
    if (posn(oEGO, 89, 109, 110, 121)) {
      v76 = 89;
      v77 = 116;
    }
    if (posn(oEGO, 80, 122, 109, 146)) {
      v76 = 70;
      v77 = 146;
    }
    LABEL464:
      if (posn(oEGO, 70, 147, 93, 167)) {
        v76 = 57;
        v77 = 160;
      }
    LABEL480:
      if (v76 == 255) {
        v76 = 0;
        goto(LABEL505);
      }
    LABEL493:
      get.posn(oEGO, v60, v61);
      v76 -= v60;
      v77 -= v61;
      set(f134);
  }
LABEL505:
  if (vEGO_EDGE_CODE != 0) {
    if (f66) {
      reset(f66);
      reset(f75);
      set(f130);
    }
  }
LABEL525:
  if (vEGO_EDGE_CODE == 1) {
    new.room(32);
  }
LABEL534:
  if (vEGO_EDGE_CODE == 2) {
    new.room(24);
  }
LABEL543:
  if (vEGO_EDGE_CODE == 4) {
    new.room(18);
  }
LABEL552:
  if (vEGO_EDGE_CODE == 3) {
    new.room(16);
  }
LABEL561:
  if (f75) {
    call(103);
  }
LABEL569:
  call(101);
  return;

LOGIC__FOOTER

