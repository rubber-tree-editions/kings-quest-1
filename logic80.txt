#include "vars.txt"

LOGIC__HEADER

#define rfTO_WITCHS_HOUSE rf0
#define rfTO_LEPRECHAUN_HOLE rf1

if (fROOM_SCRIPT_EXECUTED) {
  load.pic(vROOM_NO);
  draw.pic(vROOM_NO);
  discard.pic(vROOM_NO);
  if (fCARRIED_BY_WITCH) {
    #if VERSION_S
      load.sound(SND_CARRIED_BY_WITCH);
    #endif
    load.view(91);
    set.view(oEGO, 91);
    position(oEGO, 1, 60);
    move.obj(oEGO, 130, 60, 0, rfTO_WITCHS_HOUSE);
    #if VERSION_S
      rv1 = 35;
    #endif
  }
  else {
    load.view(89);
    set.view(oEGO, 89);
    position(oEGO, 1, 60);
    move.obj(oEGO, 135, 60, 0, rfTO_LEPRECHAUN_HOLE);
    #if VERSION_S
      rv0 = 12;
      set(rf2);
      load.sound(SND_BIRD);
    #endif
  }
  draw(oEGO);
  show.pic();
}
#if VERSION_S
  if (!fCARRIED_BY_WITCH && rf2) {
    rv0--;
    if (rv0 == 1) {
      rv0 = 35;
      sound(SND_BIRD, rf2);
    }
  }
  else {
    rv1--;
    if (rv1 == 1) {
      rv1 = 35;
      sound(SND_CARRIED_BY_WITCH, fMISC_END_MARKER);
    }
  }
#endif
if (said("examine", "view") || said("examine", "clouds") || said("examine", "room")) {
  print("The view is magnificent.");
}
if (said("anyword", "witch")) {
  print("Now is not the time to irritate the witch.");
}
if (said("anyword", "bird")) {
  print("Now is not a good time to bother the bird.");
}
if (rfTO_WITCHS_HOUSE) {
  new.room(ROOM65_IN_GINGERBREAD_HOUSE);
}
if (rfTO_LEPRECHAUN_HOLE) {
  new.room(ROOM48_LEPRECHAUN_HOLE);
}
return;

LOGIC__FOOTER

#ifndef LOGIC_AS_C
#message 1 "The view is magnificent."
#message 2 "Now is not the time to irritate the witch."
#message 3 "Now is not a good time to bother the bird."
#endif
