#include "vars.txt"

LOGIC__HEADER



if (fROOM_SCRIPT_EXECUTED) {
  load.pic(vROOM_NO);
  draw.pic(vROOM_NO);
  discard.pic(vROOM_NO);
  load.view(105);
  load.sound(5);
  set.horizon(45);
  if (vPREV_ROOM_NO == 19) {
    position(o0, 21, 162);
  }
  if (vPREV_ROOM_NO == 67) {
    position(o0, 132, 46);
    set.loop(o0, 1);
    move.obj(o0, 132, 46, 0, f148);
  }
  LABEL49:
    draw(o0);
    show.pic();
}
if (f75) {
  reset(f75);
  set(f130);
  print(null);
  vSCORE -= 5;
}
LABEL67:
  if (said("examine", "stairway") || said("examine", "room")) {
    print("The stairs go up into the heart of the mountain.");
  }
LABEL87:
  if (fEGO_TOUCHED_TRIGGER_LINE && !f21) {
    set(f21);
    if (!f79) {
      set.view(o0, 105);
    }
    start.cycling(o0);
    set(f98);
    get.posn(o0, v60, v61);
    get.priority(o0, v30);
    set.priority.v(o0, v30);
    v61 = 165;
    v96 = 4;
    move.obj.v(o0, v60, v61, 96, f20);
    sound(5, f159);
  }
LABEL137:
  if (f20) {
    reset(f20);
    print();
    erase(o0);
    set(f63);
  }
LABEL151:
  if (vEGO_EDGE_CODE == 1) {
    new.room(67);
  }
LABEL160:
  if (posn(o0, 16, 165, 31, 166)) {
    new.room(19);
  }
LABEL172:
  return;

LOGIC__FOOTER

