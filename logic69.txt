#include "vars.txt"

LOGIC__HEADER



if (fROOM_SCRIPT_EXECUTED) {
  load.pic(vROOM_NO);
  draw.pic(vROOM_NO);
  discard.pic(vROOM_NO);
  load.view(105);
  load.sound(5);
  if (vPREV_ROOM_NO == 59) {
    position(oEGO, 18, 97);
  }
  if (vPREV_ROOM_NO == 68) {
    position(oEGO, 144, 155);
    set.loop(oEGO, 1);
    move.obj(oEGO, 144, 155, 0, f148);
  }
  LABEL47:
    draw(oEGO);
    show.pic();
}
if (said("examine", "stairway") || said("examine", "room")) {
  print("The stairs descend into the lower reaches of the mountain.");
}
LABEL70:
  if (said("examine", "doorway")) {
    print("You can see sky, light, and smell clouds through the opening.");
  }
LABEL82:
  if (fEGO_TOUCHED_TRIGGER_LINE && !f21) {
    set(f21);
    if (!fEGO_INVISIBLE) {
      set.view(oEGO, 105);
    }
    start.cycling(oEGO);
    set(f98);
    get.posn(oEGO, v60, v61);
    get.priority(oEGO, v30);
    set.priority.v(oEGO, v30);
    print("Oh dear!  With a slip of the foot, you fall head over heels down the long stairway.");
    v61 = 165;
    v96 = 4;
    move.obj.v(oEGO, v60, v61, 96, f20);
    sound(5, fSOUND_END_MARKER);
  }
LABEL134:
  if (f20) {
    reset(f20);
    erase(oEGO);
    set(fGAME_OVER);
  }
LABEL146:
  if (posn(oEGO, 0, 0, 1, 167)) {
    new.room(59);
  }
LABEL158:
  if (posn(oEGO, 138, 156, 155, 157)) {
    new.room(68);
  }
LABEL170:
  return;

LOGIC__FOOTER

